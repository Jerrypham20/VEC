/**
 * yith.infinitescroll.js
 *
 * @author Your Inspiration Themes
 * @package YITH Infinite Scrolling
 * @version 1.0.0
 */
!function(t,e,n){"use strict";t.yit_infinitescroll=function(i){var o,r=t.extend({nextSelector:"",navSelector:"",itemSelector:"",contentSelector:"",eventType:"scroll",presetLoader:"",customLoader:"",buttonLabel:"",buttonClass:"",loadEffect:"fadeIn"},i),l="undefined"!=typeof yith_infs_script&&yith_infs_script.shop,a="undefined"!=typeof yith_infs_script&&yith_infs_script.block_loader,s=!1,c=!1,f=!1,h=!1,d=t(r.nextSelector).attr("href"),u=[],p=[],v=function(i,o){e.location.href!=i&&(e.history.replaceState({url:""+i},"Title",i),o&&(n.title=o),t(n).trigger("yith_infs_url_changed",[i,o]))};if("pagination"!=r.eventType&&t(r.navSelector).hide(),l)var y=t(r.itemSelector).first().nextUntil(".first",r.itemSelector).length+1;var g=function(){f&&t(r.navSelector).last().after('<div class="yith-infs-loader">'+f+"</div>"),s=!0,d=decodeURIComponent(d),d=d.replace(/^(?:\/\/|[^\/]+)*\//,"/"),t.ajax({url:d,dataType:"html",cache:yith_infs_script.use_cache,success:function(i){o=t(r.itemSelector).last();var a=t(i),f=a.find(r.contentSelector),h=a.find(r.itemSelector),g=a.find(r.navSelector),S=a.find(r.nextSelector),m=d;if(S.length?d=S.attr("href"):(c=!0,t(n).trigger("yith-infs-scroll-finished")),l&&!o.hasClass("last")&&"pagination"!=r.eventType&&_(o,y,h),t(r.navSelector).replaceWith(g),"pagination"!=r.eventType?(o.after(h),t(r.navSelector).hide()):(t(r.contentSelector).replaceWith(f),t(e).scrollTop(t(r.contentSelector).offset().top)),t(".yith-infs-loader").remove(),t(n).trigger("yith_infs_adding_elem",[h,m]),h.addClass("yith-infs-animated"),h.addClass(r.loadEffect),yith_infs_script.change_url){var b=a.filter("title").length?a.filter("title").text():"";"pagination"!=r.eventType&&(u.length||u.push([e.location.href,n.title]),u.push([m,b]),p.push(o)),v(m,b)}setTimeout(function(){s=!1,h.removeClass("yith-infs-animated"),h.removeClass(r.loadEffect),t(n).trigger("yith_infs_added_elem",[h,m])},1e3)}})},_=function(e,n,i){var o=n-e.prevUntil(".last",r.itemSelector).length,l=0;i.each(function(){var e=t(this);l++,e.removeClass("first"),e.removeClass("last"),(l-o)%n==0?e.addClass("first"):(l-(o-1))%n==0&&e.addClass("last")})};if("scroll"==r.eventType){var S=""==r.customLoader?r.presetLoader:r.customLoader;f='<img src="'+S+'">',t(e).on("scroll touchstart",function(){t(this).trigger("yith_infs_start")}),t(e).on("yith_infs_start",function(){var e=t(this),n=t(r.itemSelector).last();void 0!==n&&!s&&!c&&e.scrollTop()+e.height()>=n.offset().top+n.height()&&g()})}else"button"==r.eventType?(h='<div class="yith-infs-button-wrapper"><button id="yith-infs-button" class="'+r.buttonClass+'">'+r.buttonLabel+"</button></div>",t(r.navSelector).last().after(h),t(n).on("yith-infs-scroll-finished",function(){t(".yith-infs-button-wrapper").remove()}),t("#yith-infs-button").off("click").on("click",function(){var e=t(this);s||(a&&e.block({message:null,overlayCSS:{background:"#fff url("+a+") no-repeat center",opacity:.5,cursor:"none"}}),g()),t(n).on("yith_infs_adding_elem",function(){a&&e.unblock()})})):"pagination"==r.eventType&&t(n).off("click",r.navSelector+" a").on("click",r.navSelector+" a",function(e){e.preventDefault(),d=t(this).attr("href"),a&&t(r.navSelector).block({message:null,overlayCSS:{background:"#fff url("+a+") no-repeat center",opacity:.5,cursor:"none"}}),g()});var m;t(e).on("scroll touchstart",function(n){var i,r,l=t(e),a=l.scrollTop()+l.height();void 0!==o&&u.length&&(i=p.indexOf(o),r=o.offset().top+o.height(),a<m?a<=r&&(o=p[i?i-1:i],v(u[i][0],u[i][1])):a>r+250&&(i+1<p.length&&(o=p[i+1]),v(u[i+1][0],u[i+1][1])),m=a)})}}(jQuery,window,document);